<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scanbot3000 Kinematics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Space+Grotesk:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="hero">
        <div class="title">Scanbot3000 Kinematics</div>
        <div class="subtitle">
          Live 3D sketch of the linear stage, arm deflection, and rotation
          indicator.
        </div>
      </header>
      <div class="viewport">
        <canvas id="scene"></canvas>
        <div class="top-controls">
          <button class="top-button" id="driverStatusButton" type="button">Driver Status</button>
          <button class="top-button" id="driverSettingsButton" type="button">Driver Settings</button>
        </div>
        <div class="api-status" id="apiStatus">
          <span class="api-status-state" id="apiStatusState">OFFLINE</span>
          <span class="api-status-time" id="apiStatusTime">0s</span>
        </div>
        <div class="hud-stack">
          <div class="direct-control-panel" id="directControlPanel">
            <div class="toggle">
              <input id="directControlToggle" type="checkbox" />
              <label for="directControlToggle">Direct Control</label>
            </div>
            <div class="direct-control-row">
              <label for="directControlInterval">Interval (s)</label>
              <input id="directControlInterval" type="number" min="1" max="60" step="1" value="5" />
            </div>
          </div>
          <div class="hud">
            <div class="hud-title">Controls</div>
          <div class="control">
            <label for="yAxis">Y-axis (linear stage)</label>
            <div class="control-row">
              <input id="yAxis" type="range" min="27" max="305" value="200" step="0.1" />
              <div class="value-pair">
                <output id="yAxisVal">200.0</output>
                <span class="pos">pos <output id="yPosVal">-4375.0</output></span>
              </div>
            </div>
          </div>
          <div class="control">
            <label for="xAxis">X-axis (base position)</label>
            <div class="control-row">
              <input id="xAxis" type="range" min="0" max="333" value="100" step="0.1" />
              <div class="value-pair">
                <output id="xAxisVal">100.0</output>
                <span class="pos">pos <output id="xPosVal">1165.0</output></span>
              </div>
            </div>
          </div>
            <div class="control">
              <label for="pAxis">P-axis (arm deflection)</label>
              <div class="control-row">
                <input id="pAxis" type="range" min="-90" max="90" value="0" step="0.1" />
                <output id="pAxisVal">0.0</output>
              </div>
            </div>
            <div class="control">
              <label for="rAxis">R-axis (rotation)</label>
              <div class="control-row">
                <input id="rAxis" type="range" min="0" max="5000" value="0" step="1" />
                <div class="value-pair">
                  <output id="rAxisVal">0.0</output>
                  <span class="pos">pos <output id="rPosVal">0</output></span>
                </div>
              </div>
            </div>
            <div class="toggle">
              <input id="lockOrigin" type="checkbox" />
              <label for="lockOrigin">Lock to origin</label>
            </div>
            <div class="toggle">
              <input id="toggleLabels" type="checkbox" />
              <label for="toggleLabels">Show axis labels</label>
            </div>
            <div class="toggle">
              <input id="toggleCoordLabels" type="checkbox" checked />
              <label for="toggleCoordLabels">Show coordinate labels</label>
            </div>
          </div>
          <div class="legend">
            <div class="legend-item">
              <span class="swatch base"></span>
              Base frame
            </div>
            <div class="legend-item">
              <span class="swatch y-axis"></span>
              Y-axis
            </div>
            <div class="legend-item">
              <span class="swatch axis"></span>
              X-axis
            </div>
            <div class="legend-item">
              <span class="swatch arm"></span>
              P-axis
            </div>
            <div class="legend-item">
              <span class="swatch spin"></span>
              R-axis
            </div>
          </div>
        </div>
        <div class="axis-indicator">
          <canvas id="axisIndicator"></canvas>
        </div>
        <div class="viewcube-panel">
          <canvas id="viewCube"></canvas>
          <div class="viewcube-controls">
            <label for="cameraMode">View</label>
            <select id="cameraMode">
              <option value="perspective" selected>Perspective</option>
              <option value="orthographic">Orthographic</option>
            </select>
          </div>
        </div>
        <div class="pos-panel" id="posPanel">
          <div class="pos-title">API Pos</div>
          <div class="pos-grid">
            <span class="pos-label">x</span>
            <output id="apiPosX">--</output>
            <span class="pos-label">y</span>
            <output id="apiPosY">--</output>
            <span class="pos-label">p</span>
            <output id="apiPosP">--</output>
            <span class="pos-label">r</span>
            <output id="apiPosR">--</output>
          </div>
          <div class="pos-status">
            <span>Status</span>
            <output id="apiPosStatus">--</output>
          </div>
        </div>
        <div class="axis-tuning-panel" id="axisTuningPanel">
          <div class="axis-tuning-title">Axis Limits</div>
          <div class="axis-tuning-grid">
            <div class="axis-tuning-row">
              <div class="axis-tag">Y</div>
              <div class="axis-tuning-controls">
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisVelY">Vel</label>
                  <input id="axisVelY" type="range" min="0" max="8" value="6" step="1" />
                  <output id="axisVelYVal">500</output>
                </div>
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisAccY">Acc</label>
                  <input id="axisAccY" type="range" min="0" max="4" value="2" step="1" />
                  <output id="axisAccYVal">100</output>
                </div>
              </div>
            </div>
            <div class="axis-tuning-row">
              <div class="axis-tag">X</div>
              <div class="axis-tuning-controls">
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisVelX">Vel</label>
                  <input id="axisVelX" type="range" min="0" max="8" value="6" step="1" />
                  <output id="axisVelXVal">500</output>
                </div>
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisAccX">Acc</label>
                  <input id="axisAccX" type="range" min="0" max="4" value="2" step="1" />
                  <output id="axisAccXVal">100</output>
                </div>
              </div>
            </div>
            <div class="axis-tuning-row">
              <div class="axis-tag">P</div>
              <div class="axis-tuning-controls">
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisVelP">Vel</label>
                  <input id="axisVelP" type="range" min="0" max="8" value="6" step="1" />
                  <output id="axisVelPVal">500</output>
                </div>
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisAccP">Acc</label>
                  <input id="axisAccP" type="range" min="0" max="4" value="2" step="1" />
                  <output id="axisAccPVal">100</output>
                </div>
              </div>
            </div>
            <div class="axis-tuning-row">
              <div class="axis-tag">R</div>
              <div class="axis-tuning-controls">
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisVelR">Vel</label>
                  <input id="axisVelR" type="range" min="0" max="8" value="6" step="1" />
                  <output id="axisVelRVal">500</output>
                </div>
                <div class="axis-tuning-control">
                  <label class="axis-metric" for="axisAccR">Acc</label>
                  <input id="axisAccR" type="range" min="0" max="4" value="2" step="1" />
                  <output id="axisAccRVal">100</output>
                </div>
              </div>
            </div>
          </div>
          <button class="axis-apply" id="axisApply" type="button">Apply</button>
        </div>
        <div class="center-controls" id="centerControls">
          <button class="emergency-stop" id="emergencyStop" type="button">EMERGENCY STOP</button>
          <div class="view-readout" id="viewReadout"></div>
        </div>
        <div class="popup-layer" id="popupLayer"></div>
      </div>
    </div>
    <script src="https://unpkg.com/three@0.157.0/build/three.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
